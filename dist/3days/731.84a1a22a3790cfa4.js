"use strict";(self.webpackChunk_3days=self.webpackChunk_3days||[]).push([[731],{5731:($,h,r)=>{r.r(h),r.d(h,{MembershipModule:()=>w});var p=r(6895),T=r(8986),u=r(7750),d=r(5439),e=r(4650),g=r(138),b=r(3348),v=r(9379),f=r(9453),S=r(1130),l=r(4006),_=r(4463);function x(s,a){1&s&&(e.TgZ(0,"small",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"This field is required!")," "))}function C(s,a){if(1&s&&(e.TgZ(0,"span",29),e.YNc(1,x,3,3,"small",30),e.qZA()),2&s){e.oxw();const t=e.MAs(30);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}let A=(()=>{class s{constructor(t,i,n,o,c){this.configService=t,this.httpService=i,this.alertService=n,this.activeModal=o,this.loaderService=c,this.config={},this.form={},this.submitting=!1,this.return_date="",this.param={subscription_id:0,suspension_days:0,suspension_date:""}}ngOnInit(){console.log("config",this.config),this.param.subscription_id=this.subs.id,this.param.suspension_date=d().format("YYYY-MM-DD")}onClose(t){this.activeModal.close(t)}calcReturnDate(){this.return_date=d(this.param.suspension_date).add(this.param.suspension_days,"days").format("YYYY-MM-DD")}suspendSubscription(){this.submitting=!0,this.param.suspension_date=d(this.param.suspension_date).format("YYYY-MM-DD"),this.loaderService.setLoading(!0),console.log("subscription info",this.param),this.httpService.post("suspend-subscription",{subscription_id:this.param.subscription_id,suspension_days:this.param.suspension_days,suspension_date:this.param.suspension_date}).then(t=>{this.loaderService.setLoading(!1),this.alertService.alert("Success","Suspend subscription succeeded","success"),this.onClose({bSuspend:!0})}).catch(t=>{this.loaderService.setLoading(!1),this.alertService.alert("Error",t.message,"error")})}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(g.E),e.Y36(b.O),e.Y36(v.c),e.Y36(f.Kz),e.Y36(S.D))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-suspend-subscription"]],inputs:{subs:"subs"},decls:49,vars:21,consts:[[1,"modal-header"],[1,"modal-title","text-primary"],["src","assets/img/logo.svg","alt","Logo",1,"logo-main"],["type","button","aria-label","Close",1,"btn","btn-danger",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"contact-page-wrap"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"section-title","text-center"],[1,"title","text-black"],[1,"desc"],[1,"contact-form"],[1,"contact-form-wrapper"],[1,"row","row-gutter-12"],[1,"col-md-6"],[1,"form-group","mb-2"],["required","","type","date","name","suspension_date","id","suspension_date","placeholder","Start Date","required","",1,"form-control",3,"ngModel","ngModelChange"],["suspension_date","ngModel"],["class","invalid-form",4,"ngIf"],["type","number","name","number_days",1,"form-control",3,"ngModel","placeholder","ngModelChange","change"],["number_days","ngModel"],[1,"col-md-12"],[1,"mt-1","text-left","gdTColor"],[1,"gdTColor"],[1,"gdTColor","mx-2"],[1,"form-group","text-center","align-items-center"],[1,"btn","btn-theme",3,"click"],[1,"invalid-form"],["class","form-text text-danger",4,"ngIf"],[1,"form-text","text-danger"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"h4",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return n.onClose()}),e.TgZ(4,"span",4),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"h2",11)(13,"span"),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",12)(17,"p"),e._uU(18),e.ALo(19,"translate"),e.qZA()()()()(),e.TgZ(20,"div",8)(21,"div",9)(22,"div",13)(23,"div",14)(24,"div",8)(25,"div",9)(26,"div",15)(27,"div",16)(28,"div",17)(29,"input",18,19),e.NdJ("ngModelChange",function(c){return n.param.suspension_date=c}),e.qZA(),e.YNc(31,C,2,1,"span",20),e.qZA()(),e.TgZ(32,"div",16)(33,"div",17)(34,"input",21,22),e.NdJ("ngModelChange",function(c){return n.param.suspension_days=c})("change",function(){return n.calcReturnDate()}),e.ALo(36,"translate"),e.qZA()()(),e.TgZ(37,"div",23)(38,"p",24)(39,"span",25),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"span",26),e._uU(43),e.qZA()()(),e.TgZ(44,"div",23)(45,"div",27)(46,"button",28),e.NdJ("click",function(){return n.suspendSubscription()}),e._uU(47),e.ALo(48,"translate"),e.qZA()()()()()()()()()()()()()),2&i){const o=e.MAs(30);e.xp6(14),e.Oqu(e.lcZ(15,11,"Freeze Subscription")),e.xp6(4),e.Oqu(e.lcZ(19,13,"You can freeze your account here")),e.xp6(11),e.ekj("error",o.invalid),e.Q6J("ngModel",n.param.suspension_date),e.xp6(2),e.Q6J("ngIf",o.invalid),e.xp6(3),e.Q6J("ngModel",n.param.suspension_days)("placeholder",e.lcZ(36,15,"Number of freezing days")),e.xp6(6),e.hij("",e.lcZ(41,17,"return")," "),e.xp6(3),e.hij(" ",n.return_date,""),e.xp6(4),e.Oqu(e.lcZ(48,19,"Freeze"))}},dependencies:[p.O5,l.Fj,l.wV,l.JJ,l.Q7,l.On,_.X$]})}return s})();var M=r(4764),Z=r(1481),y=r(7226),Y=r(7835),L=r(6025);function q(s,a){if(1&s&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&s){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.product_english_name)}}function O(s,a){if(1&s&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&s){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.product_arabic_name)}}function J(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"div",15)(1,"button",23),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.onreactivateSubscription.emit(n))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&s&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"reactive_subscription")))}function U(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"div",24)(1,"button",25),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.onsuspendSubscription.emit(n))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&s&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Freeze")))}function I(s,a){if(1&s&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),e.YNc(4,q,2,1,"div",12),e.YNc(5,O,2,1,"div",13),e.TgZ(6,"div",14)(7,"div",15)(8,"button",16),e._uU(9),e.ALo(10,"translate"),e.qZA()()()(),e.TgZ(11,"div",11)(12,"div",14),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",14),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",17)(19,"div",14),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"div",14),e._uU(23),e.ALo(24,"dateFilter"),e.qZA()(),e.TgZ(25,"div",17)(26,"div",14),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"div",14),e._uU(30),e.ALo(31,"dateFilter"),e.qZA()(),e.TgZ(32,"div",18),e.YNc(33,J,4,3,"div",19),e.YNc(34,U,4,3,"div",20),e.qZA()()()()),2&s){const t=a.$implicit,i=e.oxw();e.xp6(4),e.Q6J("ngIf",!i.bLang),e.xp6(1),e.Q6J("ngIf",i.bLang),e.xp6(3),e.Q6J("ngClass","active"===t.status?"btn-success":"btn-cancel"),e.xp6(1),e.Oqu(e.lcZ(10,14,t.status)),e.xp6(4),e.Oqu(e.lcZ(14,16,"register_price")),e.xp6(3),e.lnq("",t.price,""," ","",e.lcZ(17,18,"SAR"),""),e.xp6(4),e.Oqu(e.lcZ(21,20,"Starting date")),e.xp6(3),e.Oqu(e.xi3(24,22,t.start_date,"dateText")),e.xp6(4),e.Oqu(e.lcZ(28,25,"Expiration date")),e.xp6(3),e.Oqu(e.xi3(31,27,t.end_date,"dateText")),e.xp6(3),e.Q6J("ngIf","freeze"==t.status),e.xp6(1),e.Q6J("ngIf","active"==t.status)}}function F(s,a){1&s&&(e.TgZ(0,"div")(1,"p",26),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&s&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"no_membership_available")))}let z=(()=>{class s{constructor(){this.config={},this.memberships=[],this.onreactivateSubscription=new e.vpe,this.onsuspendSubscription=new e.vpe,this.oncancelSubscription=new e.vpe,this.bLang=!1}ngOnInit(){this.bLang=this.config.isArabic,console.log("subscription sttatus",this.bLang)}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-subscriptions"]],inputs:{config:"config",memberships:"memberships"},outputs:{onreactivateSubscription:"onreactivateSubscription",onsuspendSubscription:"onsuspendSubscription",oncancelSubscription:"oncancelSubscription"},decls:11,vars:5,consts:[[1,"subscriptions-container"],[1,"container"],[1,"front-page","page-container"],[1,"page-title","mb-5","mt-5","section-title"],[1,"title-size","gwTColor","text-center","title"],[1,"subs-lists","row"],["class","col-md-6 col-12",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-md-6","col-12"],[1,"subs-item","boxshadow-custom1"],[1,"subs-content","p-3","text-align"],[1,"sub-info","mt-3"],["class","sub-name gdTColor normal-size en-text",4,"ngIf"],["class","sub-name gdTColor normal-size ar-text",4,"ngIf"],[1,"gdTColor","tnSize"],[1,"left","3days"],[1,"btn","reactangle-border",3,"ngClass"],[1,"sub-info"],[1,"submit","mt-2","d-flex","flex-row","gap-4","justify-content-end"],["class","left 3days",4,"ngIf"],["class","left danger",4,"ngIf"],[1,"sub-name","gdTColor","normal-size","en-text"],[1,"sub-name","gdTColor","normal-size","ar-text"],[1,"btn","btn-subscribe",3,"click"],[1,"left","danger"],[1,"btn","btn-cancel",3,"click"],[1,"text-center"]],template:function(i,n){1&i&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4)(5,"span"),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",5),e.YNc(9,I,35,30,"div",6),e.YNc(10,F,4,3,"div",7),e.qZA()()()()),2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,3,"Subscriptions")),e.xp6(3),e.Q6J("ngForOf",n.memberships),e.xp6(1),e.Q6J("ngIf",0===n.memberships.length))},dependencies:[p.mk,p.sg,p.O5,_.X$,L.U]})}return s})();const N=[{path:"",component:(()=>{class s{constructor(t,i,n,o,c,m,Q,R,j){this.title=t,this.meta=i,this.httpService=n,this.configService=o,this.modalService=c,this.alertService=m,this.router=Q,this.loaderService=R,this.coreTranslationService=j,this.config={},this.user={},this.slist=[],this.branch_id=0,this.getMemberSubscriptions()}ngOnInit(){this.title.setTitle(this.coreTranslationService.translateText("Membership - 3 Days")),this.meta.addTags([{property:"og:title",content:this.coreTranslationService.translateText("Membership - 3 Days")}]),this.config=this.configService.appSettingsValues,this.branch_id=this.config.user.default_branch,this.user=this.config.user||{}}ngAfterViewInit(){}getMemberSubscriptions(){console.log("membership result start!!"),this.loaderService.setLoading(!0),this.httpService.post("member/subscriptions",{}).then(t=>{this.loaderService.setLoading(!1),console.log("membership result",t),t?this.slist=t:this.alertService.alert("Get member subscription failed","Something went wrong","error")}).catch(t=>{console.log(t),this.alertService.alert("info",t.message,"error")})}reactivateSubscription(t){this.alertService.confirm("Buy PT Session","not_subscribed_buy_pt_session","Activate").then(n=>{n.isConfirmed?(this.loaderService.setLoading(!0),console.log("subscriptioin id",t.id),this.httpService.post("reactivate-subscription",{subscription_id:t.id}).then(o=>{this.loaderService.setLoading(!1),this.alertService.alert("Success","Succeed to reactivate.","success"),this.getMemberSubscriptions()}).catch(o=>{this.loaderService.setLoading(!1),this.alertService.alert("Infomration",o.message,"error")})):console.log("cancelled it.")})}cancelSubscription(t){console.log("sub cancel here",t),this.modalReference=this.modalService.open(M.o,{centered:!0,size:"lg"}),this.modalReference.componentInstance.cancelBook=t,this.modalReference.result.then(i=>{console.log("result code1",i),i&&i.bSuspend&&this.getMemberSubscriptions()},i=>{console.log("reason",i)}),this.modalReference.hidden.subscribe(()=>{})}suspendSubscription(t){this.modalReference=this.modalService.open(A,{centered:!0,size:"lg"}),this.modalReference.componentInstance.subs=t,this.modalReference.result.then(i=>{console.log("result code1",i),i&&i.bSuspend&&this.getMemberSubscriptions()},i=>{console.log("reason",i)}),this.modalReference.hidden.subscribe(()=>{})}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(Z.Dx),e.Y36(Z.h_),e.Y36(b.O),e.Y36(g.E),e.Y36(f.FF),e.Y36(v.c),e.Y36(u.F0),e.Y36(S.D),e.Y36(y.s))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-membership"]],decls:3,vars:2,consts:[[1,"main-content"],[3,"config","memberships","onreactivateSubscription","onsuspendSubscription","oncancelSubscription"]],template:function(i,n){1&i&&(e.TgZ(0,"main",0),e._UZ(1,"app-spinner"),e.TgZ(2,"app-subscriptions",1),e.NdJ("onreactivateSubscription",function(c){return n.reactivateSubscription(c)})("onsuspendSubscription",function(c){return n.suspendSubscription(c)})("oncancelSubscription",function(c){return n.cancelSubscription(c)}),e.qZA()()),2&i&&(e.xp6(2),e.Q6J("config",n.config)("memberships",n.slist))},dependencies:[Y.O,z]})}return s})()}];let D=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.oAB({type:s});static#s=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(N),u.Bz]})}return s})(),w=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.oAB({type:s});static#s=this.\u0275inj=e.cJS({imports:[p.ez,T.m,D]})}return s})()}}]);