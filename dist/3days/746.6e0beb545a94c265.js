"use strict";(self.webpackChunk_3days=self.webpackChunk_3days||[]).push([[746],{3746:(W,T,a)=>{a.r(T),a.d(T,{BookingsModule:()=>j});var r=a(6895),C=a(8986),d=a(7750),A=a(4764),e=a(4650),h=a(3348),v=a(138),p=a(9453),_=a(9379),u=a(1130),b=a(7226),f=a(4006),Z=a(4463);const Y=function(i){return{active:i}};function I(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",24),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.rate(o))}),e.TgZ(1,"div",25)(2,"div",26)(3,"div",27),e._UZ(4,"div",28),e.qZA()()()()}if(2&i){const t=c.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(1,Y,t<=n.review.rating))}}const q=function(){return[1,2,3,4,5]};let w=(()=>{class i{constructor(t,n,s,o,l,g,m,k){this.httpService=t,this.configService=n,this.modalService=s,this.alertService=o,this.router=l,this.loaderService=g,this.coreTranslationService=m,this.activeModal=k,this.submitting=!1,this.review={rating:5,class_session_id:0,comments:""},console.log("this.rateBook hrer here",this.rateBook)}rate(t){this.review.rating=t}rateSession(){this.review.class_session_id=this.rateBook.id,console.log("review content is here",this.review),this.loaderService.setLoading(!0),this.httpService.post("class-session-ratings",{rating:this.review.rating,class_session_id:this.review.class_session_id,comments:this.review.comments}).then(t=>{this.submitting=!0,this.loaderService.setLoading(!1),this.alertService.alert("Success","Rate booking succeeded","success"),this.onClose({bRateSession:!0})}).catch(t=>{this.loaderService.setLoading(!1),this.alertService.alert("Error",t.message,"error")})}onClose(t){this.activeModal.close(t)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(h.O),e.Y36(v.E),e.Y36(p.FF),e.Y36(_.c),e.Y36(d.F0),e.Y36(u.D),e.Y36(b.s),e.Y36(p.Kz))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-rate-booking"]],decls:44,vars:19,consts:[[1,"modal-header"],[1,"modal-title","text-primary"],["src","assets/img/logo.svg","alt","Logo",1,"logo-main"],["type","button","aria-label","Close",1,"btn","btn-danger",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"contact-page-wrap","share_evaluation"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"section-title","text-center"],[1,"title","text-black"],[1,"desc"],[1,"contact-form"],[1,"contact-form-wrapper"],[1,"row","row-gutter-12"],[1,"col-md-6","mx-auto","mb-3"],[1,"booking-review-box-list"],[3,"click",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"form-group","mb-0"],["name","comments",3,"ngModel","placeholder","ngModelChange"],[1,"form-group","text-center","align-items-center"],[1,"btn","btn-theme",3,"click"],[3,"click"],[1,"star-review-item",3,"ngClass"],[1,"star-pbd-parent"],[1,"star-pbd-child"],[1,"star-label"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0)(1,"h4",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return s.onClose()}),e.TgZ(4,"span",4),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"h2",11)(13,"span"),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",12)(17,"h3"),e._uU(18),e.qZA(),e.TgZ(19,"h3"),e._uU(20),e.ALo(21,"translate"),e.qZA()()()()(),e.TgZ(22,"div",8)(23,"div",9)(24,"div",13)(25,"div",14)(26,"div",8)(27,"div",9)(28,"div",15)(29,"div",16)(30,"div",17),e.YNc(31,I,5,3,"div",18),e.qZA()(),e.TgZ(32,"div",19)(33,"div",20)(34,"span"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"textarea",21),e.NdJ("ngModelChange",function(l){return s.review.comments=l}),e.ALo(38,"translate"),e.qZA()()(),e.TgZ(39,"div",19)(40,"div",22)(41,"button",23),e.NdJ("click",function(){return s.rateSession()}),e._uU(42),e.ALo(43,"translate"),e.qZA()()()()()()()()()()()()()),2&n&&(e.xp6(14),e.Oqu(e.lcZ(15,8,"share_evaluation")),e.xp6(4),e.Oqu(null==s.rateBook?null:s.rateBook.english_class_name),e.xp6(2),e.Oqu(e.lcZ(21,10,"share_assessnment")),e.xp6(11),e.Q6J("ngForOf",e.DdM(18,q)),e.xp6(4),e.Oqu(e.lcZ(36,12,"comments")),e.xp6(2),e.Q6J("ngModel",s.review.comments)("placeholder",e.lcZ(38,14,"Write message here")),e.xp6(5),e.Oqu(e.lcZ(43,16,"Evaluation approval")))},dependencies:[r.mk,r.sg,f.Fj,f.JJ,f.On,Z.X$]})}return i})();var x=a(5439),B=a(1481),L=a(7835),y=a(2340),J=a(4165),O=a(6025);function F(i,c){1&i&&(e.TgZ(0,"div")(1,"div",37),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"completed")))}function U(i,c){1&i&&(e.TgZ(0,"div")(1,"div",38),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"missed")))}function M(i,c){1&i&&(e.TgZ(0,"div")(1,"div",39),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"created")))}function N(i,c){1&i&&(e.TgZ(0,"div")(1,"div",40),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"cancelled")))}function D(i,c){if(1&i&&(e.TgZ(0,"div",41)(1,"h3"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.english_class_name)}}function R(i,c){if(1&i&&(e.TgZ(0,"div",42)(1,"h3"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.arabic_class_name)}}function Q(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",43),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.rateBooking.emit(s))}),e.TgZ(1,"div",44)(2,"div",45)(3,"div",46)(4,"div",47),e._uU(5),e.ALo(6,"translate"),e.qZA()()()()()}2&i&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"Rate review")))}function E(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",48),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.cancelBooking.emit(s))}),e.TgZ(1,"div",44)(2,"div",49)(3,"div",46)(4,"div",50),e._uU(5),e.ALo(6,"translate"),e.qZA()()()()()}2&i&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"Cancel")))}function z(i,c){if(1&i&&(e.TgZ(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20)(5,"div",21)(6,"div",22),e.YNc(7,F,4,3,"div",23),e.YNc(8,U,4,3,"div",23),e.YNc(9,M,4,3,"div",23),e.YNc(10,N,4,3,"div",23),e.qZA()(),e.YNc(11,D,3,1,"div",24),e.YNc(12,R,3,1,"div",25),e.TgZ(13,"div",26)(14,"div",27)(15,"div",28)(16,"div",29),e._UZ(17,"div",30),e.qZA(),e.TgZ(18,"span",31),e._uU(19),e.qZA()(),e.TgZ(20,"div",32)(21,"div",29),e._UZ(22,"div",33),e.qZA(),e.TgZ(23,"span",31),e._uU(24),e.ALo(25,"dateFilter"),e.ALo(26,"dateFilter"),e.qZA()()(),e.TgZ(27,"div",27)(28,"div",28)(29,"div",29),e._UZ(30,"div",34),e.qZA(),e.TgZ(31,"span",31),e._uU(32),e.qZA()(),e.TgZ(33,"div",32)(34,"div",29),e._UZ(35,"div",33),e.qZA(),e.TgZ(36,"span",31),e._uU(37),e.qZA()()()(),e.YNc(38,Q,7,3,"div",35),e.YNc(39,E,7,3,"div",36),e.qZA()()()()()),2&i){const t=c.$implicit,n=e.oxw(2);e.xp6(6),e.Q6J("ngSwitch",t.status),e.xp6(1),e.Q6J("ngSwitchCase","completed"),e.xp6(1),e.Q6J("ngSwitchCase","pending"),e.xp6(1),e.Q6J("ngSwitchCase","created"),e.xp6(1),e.Q6J("ngSwitchCase","cancelled"),e.xp6(1),e.Q6J("ngIf",!n.isLangflag),e.xp6(1),e.Q6J("ngIf",n.isLangflag),e.xp6(7),e.hij("#",t.id,""),e.xp6(5),e.AsE("",e.xi3(25,14,t.start_time,"FullTime")," - ",e.xi3(26,17,t.end_time,"FullTime"),""),e.xp6(8),e.Oqu(t.trainer_name),e.xp6(5),e.Oqu(null==t.class_session?null:t.class_session.session_date),e.xp6(1),e.Q6J("ngIf","completed"==t.status),e.xp6(1),e.Q6J("ngIf","created"==t.status)}}function K(i,c){1&i&&(e.TgZ(0,"div")(1,"p",44),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"no_booking_available")))}function $(i,c){if(1&i&&(e.ynx(0),e.TgZ(1,"div",12)(2,"div",13),e.YNc(3,z,40,20,"div",14),e.YNc(4,K,4,3,"div",15),e.qZA()(),e.BQk()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.appointmentlist),e.xp6(1),e.Q6J("ngIf",0===t.appointmentlist.length)}}function P(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",51)(1,"div",52)(2,"app-personal-training-item",53),e.NdJ("changeDate",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.receiveSessionDate1(s))}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("personalTrainings",t.sessionlist)("bBlock",!1)}}const S=function(i){return{active:i}};let V=(()=>{class i{constructor(t,n,s,o,l,g,m){this.httpService=t,this.configService=n,this.modalService=s,this.alertService=o,this.router=l,this.loaderService=g,this.coreTranslationService=m,this.classes=[],this.sessionlist=[],this.appointmentlist=[],this.cancelBooking=new e.vpe,this.rateBooking=new e.vpe,this.changeDate=new e.vpe,this.config={},this.selected_tab=1,this.session_date=x().format("YYYY-MM-DD"),this.branch_id=4,this.isLangflag=!1}ngOnInit(){this.config=this.configService.appSettingsValues,this.isLangflag=this.config.isArabic,this.branch_id=this.config.user.default_branch,console.log("=================environment.paymentKey==========",y.N.paymentKey)}ngAfterViewInit(){}sendDateDate(){console.log("changed here"),this.changeDate.emit(this.session_date)}getMemberPTSessions(){this.loaderService.setLoading(!0),this.httpService.post("branch/member/subscription/sessions",{branch_id:this.branch_id,session_date:this.session_date}).then(t=>{this.loaderService.setLoading(!1),console.log("member booking~~",t),this.sessionlist=t}).catch(t=>{this.loaderService.setLoading(!1),this.sessionlist=[],this.alertService.alert("Error",t.message,"error")})}receiveSessionDate1(t){this.session_date=t,this.getMemberPTSessions()}selectTab(t){this.selected_tab=t}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(h.O),e.Y36(v.E),e.Y36(p.FF),e.Y36(_.c),e.Y36(d.F0),e.Y36(u.D),e.Y36(b.s))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-booking-items"]],inputs:{classes:"classes",sessionlist:"sessionlist",appointmentlist:"appointmentlist"},outputs:{cancelBooking:"cancelBooking",rateBooking:"rateBooking",changeDate:"changeDate"},decls:20,vars:17,consts:[["id","classes-section",1,"bookings-container"],[1,"container"],[1,"front-page","page-container"],[1,"page-title","mb-5","mt-5","section-title"],[1,"title-size","gwTColor","text-center","title"],[1,"select-booking-tab-panel"],[1,"left-button"],[1,"p-2","d-flex"],[1,"appointments-tab","select-booking-tab",3,"ngClass","click"],[1,"sessions-tab","select-booking-tab",3,"ngClass","click"],[4,"ngIf","ngIfElse"],["elseTab",""],[1,"appointments-tab","mt-4"],[1,"appointments-list","row"],["class","appointment-item col-md-6 col-12",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"appointment-item","col-md-6","col-12"],[1,"pbd-parent"],[1,"pbd-child"],[1,"appointment-card","p-3","text-align"],[1,"p-2"],[1,"appointment-classname","gwTColor","mb-3","mt-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","appointment-classname gdTColor text-center item-class-title",4,"ngIf"],["class","appointment-classname gdTColor item-class-title",4,"ngIf"],[1,"appointment-info","gdTColor"],[1,"sub-info"],[1,"info","mb-2","d-flex","align-items-center"],[1,"left","icon"],[1,"item-img","type-icon",2,"background-image","url(assets/img/icons/active-stand-person.svg)"],[1,"mx-3"],[1,"info","mb-3","d-flex","align-items-center"],[1,"item-img","type-icon",2,"background-image","url(assets/img/icons/active-calendar.svg)"],[1,"item-img","type-icon",2,"background-image","url(assets/img/icons/capman.svg)"],["class","mt-3 apply-btn",3,"click",4,"ngIf"],["class","mt-3 cancel-btn",3,"click",4,"ngIf"],[1,"btn","btn-outline-success","text-capitalize"],[1,"btn","btn-info","text-capitalize"],[1,"btn","btn-subscribe","text-capitalize"],[1,"btn","btn-cancel","text-capitalize"],[1,"appointment-classname","gdTColor","text-center","item-class-title"],[1,"appointment-classname","gdTColor","item-class-title"],[1,"mt-3","apply-btn",3,"click"],[1,"text-center"],[1,"pbd-parent1","primarydays"],[1,"pbd-child1"],[1,"btn","btn-subscribe","p-2","w-100"],[1,"mt-3","cancel-btn",3,"click"],[1,"pbd-parent1","danger"],[1,"btn","btn-cancel","p-2","w-100"],[1,"sessions-tab"],[1,"sessions-list","row"],[3,"personalTrainings","bBlock","changeDate"]],template:function(n,s){if(1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4)(5,"span"),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8),e.NdJ("click",function(){return s.selectTab(1)}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",9),e.NdJ("click",function(){return s.selectTab(2)}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()(),e.YNc(17,$,5,2,"ng-container",10),e.YNc(18,P,3,2,"ng-template",null,11,e.W1O),e.qZA()()()),2&n){const o=e.MAs(19);e.xp6(6),e.Oqu(e.lcZ(7,7,"Sessions")),e.xp6(5),e.Q6J("ngClass",e.VKq(13,S,1==s.selected_tab)),e.xp6(1),e.Oqu(e.lcZ(13,9,"bookings")),e.xp6(2),e.Q6J("ngClass",e.VKq(15,S,2==s.selected_tab)),e.xp6(1),e.Oqu(e.lcZ(16,11,"Sessions")),e.xp6(2),e.Q6J("ngIf",1==s.selected_tab)("ngIfElse",o)}},dependencies:[r.mk,r.sg,r.O5,r.RF,r.n9,J.t,Z.X$,O.U]})}return i})();const G=[{path:"",component:(()=>{class i{constructor(t,n,s,o,l,g,m,k,H){this.title=t,this.meta=n,this.httpService=s,this.configService=o,this.modalService=l,this.alertService=g,this.router=m,this.loaderService=k,this.coreTranslationService=H,this.config={},this.user={},this.sessionlist=[],this.appointmentlist=[],this.selected_tab=1,this.session_date=x().format("YYYY-MM-DD"),this.branch_id=4}ngOnInit(){this.title.setTitle(this.coreTranslationService.translateText("Bookings - 3 Days")),this.meta.addTags([{property:"og:title",content:this.coreTranslationService.translateText("Bookings - 3 Days")}]),this.config=this.configService.appSettingsValues,this.user=this.config.user||{},this.branch_id=this.config.user.default_branch,this.getMemberBookings(),this.getMemberPTSessions()}ngAfterViewInit(){}selectTab(t){this.selected_tab=t}getMemberBookings(){this.loaderService.setLoading(!0),this.httpService.post("member-bookings",{branch_id:this.branch_id}).then(t=>{this.loaderService.setLoading(!1),console.log("member booking~~1",t),console.log("member Branch Id1111 ",this.branch_id),this.appointmentlist=t}).catch(t=>{console.log("member booking~~2"),this.loaderService.setLoading(!1),this.appointmentlist=[],this.alertService.alert("Error",t.message,"error")})}getAvailableBookings(){console.log("available Branch Id1111 ",this.branch_id),console.log("session date",this.session_date),this.loaderService.setLoading(!0),this.httpService.post("available-bookings",{branch_id:this.branch_id,session_date:this.session_date}).then(t=>{this.loaderService.setLoading(!1),console.log("available booking~~1",t),console.log("available Branch Id1111 ",this.branch_id),this.appointmentlist=t.data,this.appointmentlist=[{english_class_name:"test",arabic_class_name:"test",status:"completed",id:20},{english_class_name:"test",arabic_class_name:"test",status:"created",id:30}]}).catch(t=>{console.log("member booking~~2"),this.loaderService.setLoading(!1),this.appointmentlist=[],this.alertService.alert("Error",t.message,"error")})}getMemberPTSessions(){this.loaderService.setLoading(!0),console.log("session_date",this.session_date),console.log("session_date",this.branch_id),this.httpService.post("branch/member/subscription/sessions",{branch_id:this.branch_id,session_date:this.session_date}).then(t=>{this.loaderService.setLoading(!1),console.log("member pT session~~1",t),console.log("member Branch Id ",this.branch_id),this.sessionlist=t}).catch(t=>{console.log("member PT session~~2",t),this.loaderService.setLoading(!1),this.sessionlist=[],this.alertService.alert("Error",t.message,"error")})}rateBooking(t){this.modalReference=this.modalService.open(w,{centered:!0,size:"lg"}),this.modalReference.componentInstance.rateBook=t,this.modalReference.result.then(n=>{n&&n.bRateSession&&this.getMemberPTSessions()},n=>{console.log("reason",n)}),this.modalReference.hidden.subscribe(()=>{})}cancelBooking(t){console.log("stgart cancel booing",t),this.modalReference=this.modalService.open(A.o,{centered:!0,size:"lg"}),this.modalReference.componentInstance.cancelBook=t,this.modalReference.result.then(n=>{n&&n.bCancelBooking&&this.getMemberBookings()},n=>{console.log("reason",n)}),this.modalReference.hidden.subscribe(()=>{})}onEvent(t){console.log("session changed"),this.getMemberBookings()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(B.Dx),e.Y36(B.h_),e.Y36(h.O),e.Y36(v.E),e.Y36(p.FF),e.Y36(_.c),e.Y36(d.F0),e.Y36(u.D),e.Y36(b.s))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-bookings"]],decls:3,vars:2,consts:[[1,"main-content"],[3,"appointmentlist","sessionlist","cancelBooking","rateBooking"]],template:function(n,s){1&n&&(e.TgZ(0,"main",0),e._UZ(1,"app-spinner"),e.TgZ(2,"app-booking-items",1),e.NdJ("cancelBooking",function(l){return s.cancelBooking(l)})("rateBooking",function(l){return s.rateBooking(l)}),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("appointmentlist",s.appointmentlist)("sessionlist",s.sessionlist))},dependencies:[L.O,V]})}return i})()}];let X=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(G),d.Bz]})}return i})(),j=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[r.ez,C.m,X]})}return i})()}}]);