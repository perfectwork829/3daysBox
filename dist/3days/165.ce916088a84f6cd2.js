"use strict";(self.webpackChunk_3days=self.webpackChunk_3days||[]).push([[165],{4165:(L,b,o)=>{o.d(b,{t:()=>y});var e=o(4650),p=o(3348),v=o(138),g=o(9453),u=o(9379),h=o(7750),f=o(1130),_=o(7226),T=o(4463);let C=(()=>{class n{constructor(i,s,t,a,r,d,m,D){this.httpService=i,this.configService=s,this.modalService=t,this.alertService=a,this.router=r,this.loaderService=d,this.coreTranslationService=m,this.activeModal=D,this.config={},this.form={},this.submitting=!1,this.availableSeats=0}ngOnInit(){this.getSessionsSeats()}reserveSeat(){this.loaderService.setLoading(!0),this.submitting=!0,console.log(this.personalTraining),this.loaderService.setLoading(!0),this.httpService.post("book",{class_session_id:this.personalTraining.id,product_id:this.personalTraining.product_id}).then(i=>{this.loaderService.setLoading(!1),this.submitting=!1,this.alertService.alert("Booking","Booked successfully","success"),this.onClose({bBooking:!0})}).catch(i=>{console.log(i),this.loaderService.setLoading(!1),this.alertService.alert("Booking",i.message,"error")})}getSessionsSeats(){this.loaderService.setLoading(!1),this.httpService.post("class-sessions/count",{class_session_id:this.personalTraining.id}).then(i=>{console.log("response here",i),this.submitting=!1,this.availableSeats=parseInt(i.capacity)-parseInt(i.bookings_count)}).catch(i=>{this.submitting=!1,console.log(i)})}onClose(i){this.activeModal.close(i)}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(p.O),e.Y36(v.E),e.Y36(g.FF),e.Y36(u.c),e.Y36(h.F0),e.Y36(f.D),e.Y36(_.s),e.Y36(g.Kz))};static#i=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-dialog"]],inputs:{config:"config"},decls:71,vars:22,consts:[[1,"modal-header"],[1,"modal-title","text-primary"],["src","assets/img/logo.svg","alt","Logo",1,"logo-main"],["type","button","aria-label","Close",1,"btn","btn-danger",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"contact-page-wrap","confirm-dialog"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"class-photo",3,"src"],[1,"col-lg-12","explain-book"],[1,"class-subtitle","subtitle-size"],[1,"col-md-6"],[1,"class-detail-item","pbd-parent"],[1,"pbd-child"],[1,"inner-wrap","gdTColor","d-flex"],[1,"left","icon"],[1,"item-img","type-icon",2,"background-image","url(assets/img/icons/walker.svg)"],[1,"item-title"],[1,"item-img","type-icon"],[1,"item-img","type-icon",2,"background-image","url(/assets/img/icons/calendar.svg)"],[1,"item-img","type-icon",2,"background-image","url(/assets/img/icons/l.svg)"],[1,"col-md-12","mt-3"],[1,"form-group"],["type","button",1,"left-button","submit-button",3,"click"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"h4",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return t.onClose()}),e.TgZ(4,"span",4),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9),e._UZ(11,"img",10),e.qZA()(),e.TgZ(12,"div",8)(13,"div",11)(14,"h4"),e._uU(15),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.qZA()()(),e.TgZ(18,"div",8)(19,"h4",12),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"div",13)(23,"div",14)(24,"div",15)(25,"div",16)(26,"div",17)(27,"div",14)(28,"div",15),e._UZ(29,"div",18),e.qZA()()(),e.TgZ(30,"div",19),e._uU(31),e.ALo(32,"translate"),e.qZA()()()()(),e.TgZ(33,"div",13)(34,"div",14)(35,"div",15)(36,"div",16)(37,"div",17)(38,"div",14)(39,"div",15),e._UZ(40,"div",20),e.qZA()()(),e.TgZ(41,"div",19),e._uU(42),e.qZA()()()()()(),e.TgZ(43,"div",8)(44,"div",13)(45,"div",14)(46,"div",15)(47,"div",16)(48,"div",17)(49,"div",14)(50,"div",15),e._UZ(51,"div",21),e.qZA()()(),e.TgZ(52,"div",19),e._uU(53),e.qZA()()()()(),e.TgZ(54,"div",13)(55,"div",14)(56,"div",15)(57,"div",16)(58,"div",17)(59,"div",14)(60,"div",15),e._UZ(61,"div",22),e.qZA()()(),e.TgZ(62,"div",19),e._uU(63),e.qZA()()()()()(),e.TgZ(64,"div",8)(65,"div",23)(66,"div",24)(67,"button",25),e.NdJ("click",function(){return t.reserveSeat()}),e.TgZ(68,"span"),e._uU(69),e.ALo(70,"translate"),e.qZA()()()()()()()()),2&s&&(e.xp6(11),e.s9C("src",t.personalTraining.trainer_banner,e.LSH),e.xp6(4),e.Oqu(t.personalTraining.english_class_name),e.xp6(2),e.Oqu(t.personalTraining.english_description),e.xp6(3),e.Oqu(e.lcZ(21,16,"details")),e.xp6(11),e.AsE("",t.availableSeats," ",e.lcZ(32,18,"seats available"),""),e.xp6(9),e.Jzz("background-image: url(",t.personalTraining.trainer_banner,");"),e.xp6(2),e.Oqu(t.personalTraining.trainer_name),e.xp6(11),e.Oqu(t.personalTraining.session_date),e.xp6(10),e.AsE("",t.personalTraining.start_time," - ",t.personalTraining.end_time,""),e.xp6(4),e.ekj("loading",t.submitting),e.xp6(2),e.Oqu(e.lcZ(70,20,"reserve a seat")))},dependencies:[T.X$]})}return n})();var x=o(5439),Z=o(6895),c=o(4006);function A(n,l){1&n&&(e.TgZ(0,"div",13)(1,"h3",14)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"Personal_Training")))}function S(n,l){1&n&&(e.TgZ(0,"small",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"This field is required!")," "))}function I(n,l){if(1&n&&(e.TgZ(0,"span",15),e.YNc(1,S,3,3,"small",16),e.qZA()),2&n){e.oxw();const i=e.MAs(9);e.xp6(1),e.Q6J("ngIf",i.errors.required)}}function q(n,l){if(1&n&&(e.TgZ(0,"div",26)(1,"p",27),e._uU(2),e.qZA(),e.TgZ(3,"p",27),e._uU(4),e.qZA()()),2&n){const i=e.oxw().$implicit;e.xp6(2),e.AsE("",i.english_class_name," ",i.trainer_name,""),e.xp6(2),e.lnq("",i.branch_name_en," . ",i.start_time," - ",i.end_time," ")}}function k(n,l){if(1&n&&(e.TgZ(0,"div",28)(1,"p",27),e._uU(2),e.qZA(),e.TgZ(3,"p",27),e._uU(4),e.qZA()()),2&n){const i=e.oxw().$implicit;e.xp6(2),e.AsE("",i.arabic_class_name," ",i.trainer_name,""),e.xp6(2),e.lnq("",i.branch_name_ar," . ",i.start_time," - ",i.end_time," ")}}function Y(n,l){if(1&n){const i=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e.NdJ("click",function(){const a=e.CHM(i).$implicit,r=e.oxw();return e.KtG(r.showClassDetail(a))}),e.TgZ(2,"div",20)(3,"div",21),e._UZ(4,"i",22),e.qZA(),e._UZ(5,"div",23),e.YNc(6,q,5,5,"div",24),e.YNc(7,k,5,5,"div",25),e.qZA()()()}if(2&n){const i=l.$implicit,s=e.oxw();e.xp6(5),e.Jzz("background-image: url(",i.trainer_banner,");"),e.xp6(1),e.Q6J("ngIf",!s.isLangflag),e.xp6(1),e.Q6J("ngIf",s.isLangflag)}}function U(n,l){1&n&&(e.TgZ(0,"div")(1,"p",29),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"no_training_available")))}let y=(()=>{class n{constructor(i,s,t,a,r,d,m){this.httpService=i,this.configService=s,this.modalService=t,this.alertService=a,this.router=r,this.loaderService=d,this.coreTranslationService=m,this.personalTrainings=[],this.config={},this.bBlock=!0,this.onPersonalItemsSelected=new e.vpe,this.changeDate=new e.vpe,this.session_date=x().format("YYYY-MM-DD"),this.isLangflag=!1}sendDateDate(){console.log("changed here");const i=this.session_date;console.log("changed here",i),this.changeDate.emit(i)}showClassDetail(i){console.log(i),i.subscribed?(this.modalReference=this.modalService.open(C,{centered:!0,size:"md"}),this.modalReference.componentInstance.personalTraining=i,this.modalReference.result.then(s=>{console.log("modalOpenLogin",s),s&&s.bBooking&&setTimeout(function(){location.reload()},2e3)},s=>{console.log("reason",s)})):this.alertService.confirm("Buy PT Session","not_subscribed_buy_pt_session","Buy").then(t=>{t.isConfirmed?this.router.navigate(["/products"]):console.log("cancelled it.")})}ngOnInit(){this.isLangflag=this.config.isArabic}ngAfterViewInit(){console.log("bBlock1 here",this.bBlock)}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(p.O),e.Y36(v.E),e.Y36(g.FF),e.Y36(u.c),e.Y36(h.F0),e.Y36(f.D),e.Y36(_.s))};static#i=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-personal-training-item"]],inputs:{personalTrainings:"personalTrainings",config:"config",bBlock:"bBlock"},outputs:{onPersonalItemsSelected:"onPersonalItemsSelected",changeDate:"changeDate"},decls:15,vars:10,consts:[[1,"container"],[1,"personal-training-container","front-page","page-container","d-flex","flex-column"],["class","page-title mt-5 section-title mb-5",4,"ngIf"],[1,"form-group","mb-4","max-width-360","date-box"],["for","session_date",1,"inputbox-label"],[1,"input-icons","input-icon-left"],["required","","type","date","name","session_date","id","session_date",1,"form-control",3,"ngModel","ngModelChange"],["sessionDate","ngModel"],["class","invalid-form",4,"ngIf"],[1,"mt-3","apply-btn",3,"click"],[1,"sessions-list","row"],["class","col-md-6 col-12 mb-3",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"page-title","mt-5","section-title","mb-5"],[1,"title-size","text-center","text-white","title"],[1,"invalid-form"],["class","form-text text-danger",4,"ngIf"],[1,"form-text","text-danger"],[1,"col-md-6","col-12","mb-3"],[1,"session-item",3,"click"],[1,"session-card","text-align"],[1,"session-selected"],[1,"bi","bi-caret-left-fill"],[1,"img","trainer-photo"],["class","session-info gwTColor tnSize en-text",4,"ngIf"],["class","session-info gwTColor tnSize",4,"ngIf"],[1,"session-info","gwTColor","tnSize","en-text"],[1,"mb-1"],[1,"session-info","gwTColor","tnSize"],[1,"text-center"]],template:function(s,t){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,A,5,3,"div",2),e.TgZ(3,"div",3)(4,"label",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",5)(8,"input",6,7),e.NdJ("ngModelChange",function(r){return t.session_date=r})("ngModelChange",function(){return t.sendDateDate()}),e.qZA(),e.YNc(10,I,2,1,"span",8),e.TgZ(11,"div",9),e.NdJ("click",function(){return t.onPersonalItemsSelected.emit()}),e.qZA()()(),e.TgZ(12,"div",10),e.YNc(13,Y,8,5,"div",11),e.YNc(14,U,4,3,"div",12),e.qZA()()()),2&s){const a=e.MAs(9);e.xp6(2),e.Q6J("ngIf",t.bBlock),e.xp6(3),e.Oqu(e.lcZ(6,8,"Select_Date")),e.xp6(3),e.ekj("error",a.invalid),e.Q6J("ngModel",t.session_date),e.xp6(2),e.Q6J("ngIf",a.invalid),e.xp6(3),e.Q6J("ngForOf",t.personalTrainings),e.xp6(1),e.Q6J("ngIf",0===t.personalTrainings.length)}},dependencies:[Z.sg,Z.O5,c.Fj,c.JJ,c.Q7,c.On,T.X$]})}return n})()}}]);